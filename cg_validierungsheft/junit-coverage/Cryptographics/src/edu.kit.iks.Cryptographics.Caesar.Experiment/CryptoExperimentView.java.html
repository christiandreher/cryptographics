<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>CryptoExperimentView.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (Mar 21, 2014 6:54:09 PM)</a> &gt; <a href="../../index.html" class="el_group">Cryptographics</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.kit.iks.Cryptographics.Caesar.Experiment</a> &gt; <span class="el_source">CryptoExperimentView.java</span></div><h1>CryptoExperimentView.java</h1><pre class="source lang-java linenums">/**
 * 
 */
package edu.kit.iks.Cryptographics.Caesar.Experiment;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

import org.xnap.commons.i18n.I18n;

import edu.kit.iks.Cryptographics.Caesar.CryptoView;
import edu.kit.iks.CryptographicsLib.Configuration;
import edu.kit.iks.CryptographicsLib.KeyboardView;
import edu.kit.iks.CryptographicsLib.NumpadView;

/**
 * @author wasilij
 * 
 */
public class CryptoExperimentView extends CryptoView {

	/**
	 * Serial version UID
	 */
	private static final long serialVersionUID = -569214466948994301L;

	/**
	 * localization.
	 */
<span class="nc" id="L39">	private static I18n i18n = Configuration.getInstance().getI18n(</span>
<span class="nc" id="L40">			CryptoExperimentView.class);</span>
	
	/**
	 * 
	 */
	public CryptoExperimentView() {
<span class="nc" id="L46">		super();</span>

		// setup the caption of the next/back Buttons.
<span class="nc" id="L49">		this.getBackButton().setText(</span>
<span class="nc" id="L50">				CryptoExperimentView.i18n.tr(&quot;Back to Demonstration&quot;));</span>
<span class="nc" id="L51">		this.getNextButton().setText(</span>
<span class="nc" id="L52">				CryptoExperimentView.i18n.tr(&quot;Go to Decryption&quot;));</span>

		// setup the input/output elements for further steps.
<span class="nc" id="L55">		this.setupUserIO();</span>

		// build the user interface.
<span class="nc" id="L58">		this.userCharacterIOContainer.validate();</span>

		// setup the explanations.
<span class="nc" id="L61">		String explanation = this</span>
<span class="nc" id="L62">				.wrapHtml(CryptoExperimentView.i18n</span>
<span class="nc" id="L63">						.tr(&quot;In the demonstration you encrypted with the key 3. On further thought it seems logical that this key can vary&quot;</span>
								+ &quot; from 1 to 26.&quot;)
<span class="nc" id="L65">						+ &quot;&lt;br&gt;&quot;</span>
<span class="nc" id="L66">						+ CryptoExperimentView.i18n</span>
<span class="nc" id="L67">								.tr(&quot;Now you have 2 options:&quot;)</span>
<span class="nc" id="L68">						+ &quot;&lt;br&gt;&quot;</span>
<span class="nc" id="L69">						+ &quot;&lt;br&gt;&quot;</span>
<span class="nc" id="L70">						+ CryptoExperimentView.i18n</span>
<span class="nc" id="L71">								.tr(&quot;1. You can either put your own key and plaintext into the textfield,&quot;)</span>
<span class="nc" id="L72">						+ &quot;&lt;br&gt;&quot;</span>
<span class="nc" id="L73">						+ &quot;&lt;br&gt;&quot;</span>
<span class="nc" id="L74">						+ CryptoExperimentView.i18n</span>
<span class="nc" id="L75">								.tr(&quot;2. or you just click \&quot;Generate\&quot; and this awesome program will generate a key and plaintext for you.&quot;));</span>
<span class="nc" id="L76">		this.setupExplanations(explanation, GridBagConstraints.PAGE_START, 1,</span>
<span class="nc" id="L77">				0, 6);</span>

<span class="nc" id="L79">		this.validate();</span>
<span class="nc" id="L80">	}</span>

	/**
	 * Called when the user done the needed input in a valid way.
	 * 
	 * @param inputChars
	 * @param key
	 */
	public void setupExperimentCore(char[] inputChars, int key) {
		// User input will be now filled into the boxes. This field is not
		// needed anymore.
<span class="nc" id="L91">		this.removeUserIOContainer();</span>
<span class="nc" id="L92">		this.removeExplanations();</span>

		// setup IO.
<span class="nc" id="L95">		this.setupInOutElements(inputChars, key);</span>

		// setup the alphabet.
<span class="nc" id="L98">		this.setupAlphabet();</span>

		// setup the explanations.
<span class="nc" id="L101">		String explanations = this</span>
<span class="nc" id="L102">				.wrapHtml(CryptoExperimentView.i18n</span>
<span class="nc" id="L103">						.tr(&quot;Let's test what you have learned. If help needed touch the help button.&quot;));</span>
<span class="nc" id="L104">		this.setupExplanations(explanations,</span>
<span class="nc" id="L105">				GridBagConstraints.LAST_LINE_START, 0, 0, 4);</span>

		// build the new view.
<span class="nc" id="L108">		this.validate();</span>
<span class="nc" id="L109">		this.repaint();</span>
<span class="nc" id="L110">	}</span>

	/**
	 * Creates the keyboard with numerical values and presents it.
	 * 
	 * @param input
	 *            the textfield referred to the numpad.
	 */
	public void createNumpad(JTextField input) {
<span class="nc" id="L119">		this.numpad = new NumpadView(input, NumpadView.NUMBER_MODE);</span>
<span class="nc" id="L120">		GridBagConstraints numpadConst = new GridBagConstraints();</span>
<span class="nc" id="L121">		numpadConst.anchor = GridBagConstraints.LINE_END;</span>
<span class="nc" id="L122">		numpadConst.weightx = 1.0;</span>
<span class="nc" id="L123">		numpadConst.weighty = 0.5;</span>
<span class="nc" id="L124">		numpadConst.gridx = 0;</span>
<span class="nc" id="L125">		numpadConst.gridy = 3;</span>
<span class="nc" id="L126">		numpadConst.gridwidth = 4;</span>
<span class="nc" id="L127">		numpadConst.gridheight = 5;</span>
<span class="nc" id="L128">		numpadConst.insets = new Insets(0, 10, 100, 200);</span>
<span class="nc" id="L129">		this.add(this.numpad, numpadConst);</span>
<span class="nc" id="L130">		this.validate();</span>
<span class="nc" id="L131">	}</span>
	
	/**
	 * Creates the keyboard and shows it in the main container. /**
	 * 
	 * @param input
	 *            the textfield referred to the Keyboard.
	 * @param flag
	 *            the mode the Keyboard should be created in.
	 */
	public void createKeyboard(JTextField input) {
<span class="nc" id="L142">		this.keyboard = new KeyboardView(input, KeyboardView.STRING_MODE);</span>
<span class="nc" id="L143">		GridBagConstraints kbConst = new GridBagConstraints();</span>
<span class="nc" id="L144">		kbConst.anchor = GridBagConstraints.LINE_END;</span>
<span class="nc" id="L145">		kbConst.weightx = 1.0;</span>
<span class="nc" id="L146">		kbConst.weighty = 0.5;</span>
<span class="nc" id="L147">		kbConst.gridx = 0;</span>
<span class="nc" id="L148">		kbConst.gridy = 2;</span>
<span class="nc" id="L149">		kbConst.gridwidth = 11;</span>
<span class="nc" id="L150">		kbConst.gridheight = 3;</span>
<span class="nc" id="L151">		kbConst.insets = new Insets(0, 10, 100, 100);</span>
<span class="nc" id="L152">		this.add(this.keyboard, kbConst);</span>
<span class="nc" id="L153">		this.validate();</span>
<span class="nc" id="L154">		this.repaint();</span>
<span class="nc" id="L155">	}</span>

	/**
	 * Removes the numpad from the view.
	 */
	public void removeNumpad() {
<span class="nc" id="L161">		this.remove(this.numpad);</span>
<span class="nc" id="L162">		this.numpad = null;</span>
<span class="nc" id="L163">		this.validate();</span>
<span class="nc" id="L164">		this.repaint();</span>
<span class="nc" id="L165">	}</span>

	// ----------------------------------------------//
	// -------------------private methods-----------//

	private void setupUserIO() {
		// set the Container for the user interface.
<span class="nc" id="L172">		this.setupUserIOContainer();</span>

		// add the input field.
<span class="nc" id="L175">		this.setupUserLiteralInput();</span>

		// add the key-input field.
<span class="nc" id="L178">		this.setupUserNumericalInput();</span>

		// add the button for generating input if the user is too lazy.
<span class="nc" id="L181">		this.setupIOGenerator();</span>
<span class="nc" id="L182">	}</span>

	private void setupUserIOContainer() {
<span class="nc" id="L185">		this.userCharacterIOContainer = new JPanel(new GridBagLayout());</span>
<span class="nc" id="L186">        this.userCharacterIOContainer.setMinimumSize(new Dimension(500,600));</span>
<span class="nc" id="L187">		GridBagConstraints inConst = new GridBagConstraints();</span>
<span class="nc" id="L188">		inConst.anchor = GridBagConstraints.LINE_START;</span>
<span class="nc" id="L189">		inConst.weightx = 0.5;</span>
<span class="nc" id="L190">		inConst.weighty = 1.0;</span>
<span class="nc" id="L191">		inConst.gridx = 0;</span>
<span class="nc" id="L192">		inConst.gridy = 2;</span>
<span class="nc" id="L193">		inConst.gridheight = 10;</span>
<span class="nc" id="L194">		inConst.gridwidth = 4;</span>
<span class="nc" id="L195">		inConst.fill = GridBagConstraints.VERTICAL;</span>
<span class="nc" id="L196">		inConst.insets = new Insets(0, 100, 100, 0);</span>
<span class="nc" id="L197">		this.add(this.userCharacterIOContainer, inConst);</span>
<span class="nc" id="L198">	}</span>

	private void setupUserLiteralInput() {

		// add the caption of the input field.
<span class="nc" id="L203">		JLabel inputCaption = new JLabel(</span>
<span class="nc" id="L204">				CryptoExperimentView.i18n.tr(&quot;Put your name in here!&quot;));</span>
<span class="nc" id="L205">		GridBagConstraints capConst = new GridBagConstraints();</span>
<span class="nc" id="L206">		capConst.gridx = 0;</span>
<span class="nc" id="L207">		capConst.gridy = 0;</span>
<span class="nc" id="L208">		capConst.insets = new Insets(0, 0, 0, 50);</span>
<span class="nc" id="L209">		capConst.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L210">		this.userCharacterIOContainer.add(inputCaption, capConst);</span>
		
<span class="nc" id="L212">		this.literalInput = new JTextField();</span>
<span class="nc" id="L213">		this.literalInput.setPreferredSize(new Dimension(250, 50));</span>
<span class="nc" id="L214">		GridBagConstraints inputConst = new GridBagConstraints();</span>
<span class="nc" id="L215">		inputConst.gridx = 0;</span>
<span class="nc" id="L216">		inputConst.gridy = 1;</span>
<span class="nc" id="L217">		inputConst.gridheight = 2;</span>
<span class="nc" id="L218">		inputConst.insets = new Insets(0, 0, 0, 50);</span>
<span class="nc" id="L219">		inputConst.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L220">		this.userCharacterIOContainer.add(this.literalInput, inputConst);</span>
<span class="nc" id="L221">		this.literalInput</span>
<span class="nc" id="L222">				.setBorder(BorderFactory.createLineBorder(Color.black));</span>
		
<span class="nc" id="L224">		JLabel textLabel = new JLabel(CryptoExperimentView.i18n.tr(&quot;Or&quot;));</span>
<span class="nc" id="L225">		GridBagConstraints textConst = new GridBagConstraints();</span>
<span class="nc" id="L226">		textConst.gridx = 0;</span>
<span class="nc" id="L227">		textConst.gridy = 3;</span>
<span class="nc" id="L228">		textConst.insets = new Insets(50, 200, 0, 0);</span>
<span class="nc" id="L229">		textConst.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L230">		this.userCharacterIOContainer.add(textLabel, textConst);</span>
<span class="nc" id="L231">	}</span>

	private void setupUserNumericalInput() {
<span class="nc" id="L234">		this.keyInput = new JTextField();</span>
<span class="nc" id="L235">		this.keyInput.setMinimumSize(new Dimension(50, 50));</span>
<span class="nc" id="L236">		GridBagConstraints keyConst = new GridBagConstraints();</span>
<span class="nc" id="L237">		keyConst.gridx = 2;</span>
<span class="nc" id="L238">		keyConst.gridy = 1;</span>
<span class="nc" id="L239">		keyConst.gridheight = 2;</span>
<span class="nc" id="L240">		keyConst.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L241">		this.userCharacterIOContainer.add(this.keyInput, keyConst);</span>
<span class="nc" id="L242">		this.keyInput.setBorder(BorderFactory.createLineBorder(Color.black));</span>

		// add the caption for the input field.
<span class="nc" id="L245">		JLabel keyCaption = new JLabel(&quot;The key goes here.&quot;);</span>
<span class="nc" id="L246">		GridBagConstraints keyCapConst = new GridBagConstraints();</span>
<span class="nc" id="L247">		keyCapConst.gridx = 2;</span>
<span class="nc" id="L248">		keyCapConst.gridy = 0;</span>
<span class="nc" id="L249">		keyCapConst.fill = GridBagConstraints.BOTH;</span>
<span class="nc" id="L250">		this.userCharacterIOContainer.add(keyCaption, keyCapConst);</span>
<span class="nc" id="L251">	}</span>

	private void setupIOGenerator() {
<span class="nc" id="L254">		this.generator = new JButton(</span>
<span class="nc" id="L255">				CryptoExperimentView.i18n.tr(&quot;Generate letters&quot;));</span>
<span class="nc" id="L256">		this.generator.setPreferredSize(new Dimension(300, 50));</span>
<span class="nc" id="L257">		GridBagConstraints genConst = new GridBagConstraints();</span>
<span class="nc" id="L258">		genConst.weightx = 1.0;</span>
<span class="nc" id="L259">		genConst.gridx = 0;</span>
<span class="nc" id="L260">		genConst.gridy = 5;</span>
<span class="nc" id="L261">		genConst.gridwidth = 3;</span>
<span class="nc" id="L262">        genConst.insets = new Insets(50, 0, 0, 0);</span>
<span class="nc" id="L263">		this.userCharacterIOContainer.add(this.generator, genConst);</span>
<span class="nc" id="L264">	}</span>

	private String wrapHtml(String text) {
<span class="nc" id="L267">		return &quot;&lt;html&gt;&lt;body&gt;&lt;div width=900px&gt;&quot; + text + &quot;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span>test (Mar 21, 2014 6:54:09 PM)</div></body></html>