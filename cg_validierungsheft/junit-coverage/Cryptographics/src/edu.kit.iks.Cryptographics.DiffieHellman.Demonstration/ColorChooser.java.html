<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>ColorChooser.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (Mar 21, 2014 6:54:09 PM)</a> &gt; <a href="../../index.html" class="el_group">Cryptographics</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.kit.iks.Cryptographics.DiffieHellman.Demonstration</a> &gt; <span class="el_source">ColorChooser.java</span></div><h1>ColorChooser.java</h1><pre class="source lang-java linenums"><span class="nc" id="L1">package edu.kit.iks.Cryptographics.DiffieHellman.Demonstration;</span>

import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JPanel;

/**
 * This JPanel allows us to choose a color
 * 
 * @author kai
 *
 */
public class ColorChooser extends JPanel {
	
	private static final long serialVersionUID = -7179916629639929417L;

	/* will use/display next color if clicked */
	private JButton next;
	
	/* will use/display previous color if clicked */
	private JButton prev;
	
	/* a JPanel where the color is drawn */
	private DrawPanel dp;
	
	/* the index of the current color */
	private int index;
	
	/* the ellipses with color
	 * that visualizes the current color
	 */
	private Ellipse2DwithColor current;
	
	/* all possible colors to choose from */
	private Color[] toChooseFrom;
	
	private boolean hide;
	
	/**
	 * Will setup the object, and layout correctly
	 * @param d the size of the colorchooser
	 * @param color the default color
	 * @param colors all possible colors to choose from
	 */
<span class="nc" id="L53">	public ColorChooser(Dimension d, Color color, Color[] colors) {</span>
<span class="nc" id="L54">		this.toChooseFrom = colors;</span>
<span class="nc" id="L55">		this.setLayout(new FlowLayout());</span>
<span class="nc" id="L56">		this.next = new JButton(&quot;-&gt;&quot;);</span>
<span class="nc" id="L57">		this.prev = new JButton(&quot;&lt;-&quot;);</span>
<span class="nc" id="L58">		this.current = new Ellipse2DwithColor(0, 0, d.getHeight(), d.getWidth(), color);</span>
<span class="nc" id="L59">		this.dp = new DrawPanel(d);</span>
<span class="nc" id="L60">		this.next.addActionListener(new ActionListener() {</span>
			
			@Override
			public void actionPerformed(ActionEvent arg0) {
<span class="nc" id="L64">				index = (index + 1) % toChooseFrom.length;</span>
<span class="nc" id="L65">				current.setColor(toChooseFrom[index]);</span>
<span class="nc" id="L66">				repaint();</span>
<span class="nc" id="L67">			}</span>
		});
<span class="nc" id="L69">		this.prev.addActionListener(new ActionListener() {</span>
			
			@Override
			public void actionPerformed(ActionEvent arg0) {
<span class="nc bnc" id="L73" title="All 2 branches missed.">				index = index &gt; 0 ? (index - 1) % toChooseFrom.length : (toChooseFrom.length -1);</span>
<span class="nc" id="L74">				current.setColor(toChooseFrom[index]);</span>
<span class="nc" id="L75">				repaint();</span>
<span class="nc" id="L76">			}</span>
		});
<span class="nc" id="L78">		this.add(prev);</span>
<span class="nc" id="L79">		this.add(dp);</span>
<span class="nc" id="L80">		this.add(next);</span>
		
<span class="nc" id="L82">		validate();</span>
<span class="nc" id="L83">	}</span>

	/*
	 * Here we draw the colorcircle
	 */
	private class DrawPanel extends JPanel {
		
		private static final long serialVersionUID = -3771892570139056170L;

<span class="nc" id="L92">		public DrawPanel(Dimension d) {</span>
<span class="nc" id="L93">			this.setSize(d);</span>
<span class="nc" id="L94">			this.setPreferredSize(d);</span>
<span class="nc" id="L95">		}</span>
		
		
		@Override
		protected void paintComponent(Graphics g) {
<span class="nc" id="L100">			Graphics2D g2 = (Graphics2D) g;</span>
<span class="nc" id="L101">			g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);</span>
<span class="nc" id="L102">			g2.setPaint(current.getColor());</span>
<span class="nc" id="L103">			g2.fill(current);</span>
<span class="nc" id="L104">		}</span>
		
	}
	
	/**
	 * return the currently displayed color
	 * @return the current color
	 */
	public Color getCurrentColor() {
<span class="nc" id="L113">		return this.current.getColor();</span>
	}
	
	/** 
	 * change the possible colors
	 * @param colors the possible colors to choose from
	 */
	public void setToChooseFrom(Color[] colors) {
<span class="nc" id="L121">		this.index = 0;</span>
<span class="nc" id="L122">		this.toChooseFrom = colors;</span>
<span class="nc" id="L123">		this.current.setColor(colors[0]);</span>
<span class="nc" id="L124">		repaint();</span>
<span class="nc" id="L125">	}</span>

	/** 
	 * get the possible colors
	 * @return the colors to choose from
	 */
	public Color[] getToChooseFrom() {
<span class="nc" id="L132">		return toChooseFrom;</span>
	}
	
	@Override
	public void paint(Graphics g) {
<span class="nc" id="L137">		Graphics2D g2 = (Graphics2D) g;</span>
<span class="nc bnc" id="L138" title="All 2 branches missed.">		if(hide) {</span>
		} else {
<span class="nc" id="L140">			super.paint(g2);</span>
		}
<span class="nc" id="L142">		return;</span>
	}

	public void setHide(boolean hide) {
<span class="nc" id="L146">		this.hide = hide;</span>
<span class="nc" id="L147">		this.repaint();</span>
<span class="nc" id="L148">	}</span>
	
	public boolean getHide() {
<span class="nc" id="L151">		return this.hide;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span>test (Mar 21, 2014 6:54:09 PM)</div></body></html>