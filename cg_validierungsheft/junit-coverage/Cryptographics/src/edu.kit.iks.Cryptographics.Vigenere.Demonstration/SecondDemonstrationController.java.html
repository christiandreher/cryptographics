<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>SecondDemonstrationController.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (Mar 21, 2014 6:54:09 PM)</a> &gt; <a href="../../index.html" class="el_group">Cryptographics</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.kit.iks.Cryptographics.Vigenere.Demonstration</a> &gt; <span class="el_source">SecondDemonstrationController.java</span></div><h1>SecondDemonstrationController.java</h1><pre class="source lang-java linenums"><span class="nc" id="L1">package edu.kit.iks.Cryptographics.Vigenere.Demonstration;</span>

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import org.xnap.commons.i18n.I18n;

import edu.kit.iks.Cryptographics.VisualizationContainerController;
import edu.kit.iks.CryptographicsLib.AbstractVisualizationController;
import edu.kit.iks.CryptographicsLib.AbstractVisualizationInfo;
import edu.kit.iks.CryptographicsLib.Configuration;
import edu.kit.iks.CryptographicsLib.Logger;

/**
 * Controller of the second step
 * @author Aydin Tekin
 */
public class SecondDemonstrationController extends AbstractVisualizationController {
	
	/**
	 * current state of progress
	 */
	private int state;
	
	/**
	 * Localization instance
	 */
<span class="nc" id="L28">	private static I18n i18n = Configuration.getInstance().getI18n(SecondDemonstrationController.class);</span>
	
	/**
	 * Constructor
	 * @param visualizationInfo visualization information of current step
	 */
	public SecondDemonstrationController(AbstractVisualizationInfo visualizationInfo) {
<span class="nc" id="L35">		super(visualizationInfo);</span>
<span class="nc" id="L36">	}</span>
	
	/**
	 * changes the GUI according to step
	 */
	private void stepBack() {
<span class="nc" id="L42">		state--;</span>
<span class="nc" id="L43">		Logger.debug(&quot;SecondDemonstrationController&quot;, &quot;stepBack()&quot;, &quot;State: &quot; + state);</span>
<span class="nc bnc" id="L44" title="All 8 branches missed.">		switch (state) {</span>
		case -1:
<span class="nc" id="L46">			VisualizationContainerController containerController = (VisualizationContainerController)getParentController();</span>
<span class="nc" id="L47">			containerController.presentPreviousVisualizationController();</span>
<span class="nc" id="L48">			break;</span>
		case 0:
<span class="nc" id="L50">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L51">					+ i18n.tr(&quot;Now we want to encrypt 'ANNA'. First of all we add the &quot;</span>
					+ &quot;position of evey character, as you can see in the bottom, in the &quot;
					+ &quot;alphabet under each character.&quot;)
<span class="nc" id="L54">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L55">			getView().setKeyVisible(false);</span>
<span class="nc" id="L56">			getView().setEncryptedCharsVisible(false);</span>
<span class="nc" id="L57">			getView().setCalculatorVisible(false);</span>
<span class="nc" id="L58">			break;</span>
		case 1:
<span class="nc" id="L60">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L61">					+ i18n.tr(&quot;This is the key for the encryption. Now we go to the &quot;</span>
					+ &quot;next step and encrypt the first character.&quot;)
<span class="nc" id="L63">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L64">			getView().setKeyVisible(true);</span>
<span class="nc" id="L65">			getView().setEncryptedCharsVisible(true);</span>
<span class="nc" id="L66">			getView().setCalculatorVisible(false);</span>
<span class="nc" id="L67">			break;</span>
		case 2:
<span class="nc" id="L69">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L70">					+ i18n.tr(&quot;The position of 'A' in the alphabet is 1. The &quot;</span>
					+ &quot;position of 'O' is 14. Now we calculate 1 + 14 &quot;
					+ &quot;and get 15.&quot;)
<span class="nc" id="L73">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L74">			getView().setKeyVisible(true);</span>
<span class="nc" id="L75">			getView().setEncryptedCharsVisible(true);</span>
<span class="nc" id="L76">			getView().setCalculatorVisible(true);</span>
<span class="nc" id="L77">			getView().getAlphabet().unHighlightAll();</span>
<span class="nc" id="L78">			getView().setCalculator(1,15);</span>
<span class="nc" id="L79">			getView().setTextField(0, &quot;&quot;);</span>
<span class="nc" id="L80">			getView().getAlphabet().highlight(0);</span>
<span class="nc" id="L81">			getView().getAlphabet().highlight(13);</span>
<span class="nc" id="L82">			break;</span>
		case 3:
<span class="nc" id="L84">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L85">					+ i18n.tr(&quot;The number 16 represents 'P' in the alphabet. &quot;</span>
					+ &quot;So the first encrypted character is 'P'. Lets go &quot;
					+ &quot;to the next one.&quot;)
<span class="nc" id="L88">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L89">			getView().setCalculator(1,15);</span>
<span class="nc" id="L90">			getView().highlightAndSetText(15, 0, &quot;P&quot;);</span>
<span class="nc" id="L91">			getView().setTextField(1, &quot;&quot;);</span>
<span class="nc" id="L92">			break;</span>
		case 4:
<span class="nc" id="L94">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L95">					+ i18n.tr(&quot;Now get to the next character. Its a 'N', which &quot;</span>
					+ &quot;represents the number 14. The second character &quot;
					+ &quot;of they key is 'K', which is the 11. 14+11 = 25 -&gt; &quot;
					+ &quot;'Y'!&quot;)
<span class="nc" id="L99">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L100">			getView().setCalculator(14,11);</span>
<span class="nc" id="L101">			getView().highlightAndSetText(24, 1, &quot;Y&quot;);</span>
<span class="nc" id="L102">			getView().setTextField(2, &quot;&quot;);</span>
<span class="nc" id="L103">			break;</span>
		case 5:
<span class="nc" id="L105">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L106">					+ i18n.tr(&quot;Now we continue...&quot;)</span>
<span class="nc" id="L107">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L108">			getView().setCalculator(14,1);</span>
<span class="nc" id="L109">			getView().highlightAndSetText(14, 2, &quot;O&quot;);</span>
<span class="nc" id="L110">			getView().setTextField(3, &quot;&quot;);</span>
			break;
		}
<span class="nc" id="L113">	}</span>
	
	/**
	 * changes the GUI according to step
	 */
	private void stepForward() {
<span class="nc" id="L119">		state++;</span>
<span class="nc" id="L120">		Logger.debug(&quot;SecondDemonstrationController&quot;, &quot;stepForward()&quot;, &quot;State: &quot; + state);</span>
<span class="nc bnc" id="L121" title="All 8 branches missed.">		switch (state) {</span>
		case 1:
<span class="nc" id="L123">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L124">					+ i18n.tr(&quot;This is the key for the encryption. Now we go &quot;</span>
					+ &quot;to the next step and encrypt the first character.&quot;)
<span class="nc" id="L126">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L127">			getView().setKeyVisible(true);</span>
<span class="nc" id="L128">			getView().setEncryptedCharsVisible(true);</span>
<span class="nc" id="L129">			getView().setCalculatorVisible(false);</span>
<span class="nc" id="L130">			break;</span>
		case 2:
<span class="nc" id="L132">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L133">					+ i18n.tr(&quot;The position of 'A' in the alphabet is 1. The &quot;</span>
					+ &quot;position of 'O' is 15. Now we calculate 1 + 15 &quot;
					+ &quot;and get 16.&quot;)
<span class="nc" id="L136">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L137">			getView().setKeyVisible(true);</span>
<span class="nc" id="L138">			getView().setEncryptedCharsVisible(true);</span>
<span class="nc" id="L139">			getView().setCalculatorVisible(true);</span>
<span class="nc" id="L140">			getView().setCalculator(1,15);</span>
<span class="nc" id="L141">			getView().getAlphabet().unHighlightAll();</span>
<span class="nc" id="L142">			getView().getAlphabet().highlight(0);</span>
<span class="nc" id="L143">			getView().getAlphabet().highlight(14);</span>
<span class="nc" id="L144">			break;</span>
		case 3:
<span class="nc" id="L146">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L147">					+ i18n.tr(&quot;The number 16 represents 'P' in the alphabet. So &quot;</span>
					+ &quot;the first encrypted character is 'P'. Lets go to &quot;
					+ &quot;the next one.&quot;)
<span class="nc" id="L150">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L151">			getView().highlightAndSetText(15, 0, &quot;P&quot;);</span>
<span class="nc" id="L152">			break;</span>
		case 4:
<span class="nc" id="L154">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L155">					+ i18n.tr(&quot;Now get to the next character. Its a 'N', which &quot;</span>
					+ &quot;represents the number 14. The second character of &quot;
					+ &quot;they key is 'K', which is the 11. 14+11 = 25 -&gt; 'Y'!&quot;)
<span class="nc" id="L158">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L159">			getView().setCalculator(14,11);</span>
<span class="nc" id="L160">			getView().highlightAndSetText(24, 1, &quot;Y&quot;);</span>
<span class="nc" id="L161">			break;</span>
		case 5:
<span class="nc" id="L163">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L164">					+ i18n.tr(&quot;Now we continue...&quot;)</span>
<span class="nc" id="L165">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L166">			getView().setCalculator(14,1);</span>
<span class="nc" id="L167">			getView().highlightAndSetText(14, 2, &quot;O&quot;);</span>
<span class="nc" id="L168">			break;</span>
		case 6:
<span class="nc" id="L170">			getView().setExplanation(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L171">					+ i18n.tr(&quot;E = 5 and Y = 25. 25 + 5 = 30, but our alphabet doesnt &quot;</span>
					+ &quot;have 30 characters. So we now use the modulo: 30 modulo &quot;
					+ &quot;26 = 4.&quot;)
<span class="nc" id="L174">					+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;);</span>
<span class="nc" id="L175">			getView().setCalculator(5,25);</span>
<span class="nc" id="L176">			getView().highlightAndSetText(3, 3, &quot;D&quot;);</span>
<span class="nc" id="L177">			break;</span>
		case 7:
<span class="nc" id="L179">			VisualizationContainerController containerController = (VisualizationContainerController)getParentController();</span>
<span class="nc" id="L180">			containerController.presentNextVisualizationController();</span>
			break;
		}
<span class="nc" id="L183">	}</span>
	
	/**
	 * loads the view and registers action listeners
	 */
	@Override
	public void loadView() {
<span class="nc" id="L190">		this.state = 0;</span>
<span class="nc" id="L191">		this.view = new SecondDemonstrationView();</span>
<span class="nc" id="L192">		this.getView().getBackButton().addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent event) {
<span class="nc" id="L194">				stepBack();</span>
<span class="nc" id="L195">			}</span>
		});
<span class="nc" id="L197">		this.getView().getNextButton().addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent event) {
<span class="nc" id="L199">				stepForward();</span>
<span class="nc" id="L200">			}</span>
		});
<span class="nc" id="L202">		this.getView().getSkipButton().addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent event) {
<span class="nc" id="L204">				VisualizationContainerController containerController = (VisualizationContainerController)getParentController();</span>
<span class="nc" id="L205">				containerController.presentNextVisualizationController();</span>
<span class="nc" id="L206">			}</span>
		});
<span class="nc" id="L208">		this.getView().getReturnButton().addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent event) {
<span class="nc" id="L210">				VisualizationContainerController containerController = (VisualizationContainerController)getParentController();</span>
<span class="nc" id="L211">				containerController.presentPreviousVisualizationController();</span>
<span class="nc" id="L212">			}</span>
		});
<span class="nc" id="L214">	}</span>

	/**
	 * unloads the view
	 */
	@Override
	public void unloadView() {
<span class="nc" id="L221">		this.view = null;</span>
<span class="nc" id="L222">	}</span>
	
	/**
	 * returns the help string
	 * @return help string
	 */
	@Override
	public String getHelp() {
<span class="nc" id="L230">		return i18n.tr(&quot;Follow the explanations!&quot;);</span>
	}
	
	/**
	 * returns the view
	 * @return view of current step
	 */
	@Override
	public SecondDemonstrationView getView() {
<span class="nc" id="L239">		return (SecondDemonstrationView) this.view;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span>test (Mar 21, 2014 6:54:09 PM)</div></body></html>