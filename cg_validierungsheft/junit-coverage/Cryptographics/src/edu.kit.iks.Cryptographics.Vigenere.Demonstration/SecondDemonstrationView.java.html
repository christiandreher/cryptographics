<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>SecondDemonstrationView.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (Mar 21, 2014 6:54:09 PM)</a> &gt; <a href="../../index.html" class="el_group">Cryptographics</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.kit.iks.Cryptographics.Vigenere.Demonstration</a> &gt; <span class="el_source">SecondDemonstrationView.java</span></div><h1>SecondDemonstrationView.java</h1><pre class="source lang-java linenums">package edu.kit.iks.Cryptographics.Vigenere.Demonstration;

import java.awt.Dimension;
import java.awt.Font;

import javax.swing.JButton;
import javax.swing.JLabel;

import org.xnap.commons.i18n.I18n;

import edu.kit.iks.CryptographicsLib.AlphabetStripView;
import edu.kit.iks.CryptographicsLib.Configuration;
import edu.kit.iks.CryptographicsLib.VisualizationView;
import edu.kit.iks.Cryptographics.Vigenere.VigenereModel;

/**
 * in this step, the encryption will be explained
 * @author Aydin Tekin
 */
public class SecondDemonstrationView extends VisualizationView {
	private static final long serialVersionUID = 6294968461280032987L;

	/**
	 * Localization instance
	 */
<span class="nc" id="L26">	private static I18n i18n = Configuration.getInstance().getI18n(SecondDemonstrationView.class);</span>
	
	// PLAINTEXTCHARS WITH THEIR INDEXES
	/**
	 * plain characters
	 */
	private JLabel[] indexCharPlain;
	/**
	 * plain characters position in alphabet
	 */
	private JLabel[] textCharPlain;
	
	/**
	 * Button to skip step
	 */
	private JButton skip;
	
	/**
	 * Button to go back
	 */
	private JButton btnReturn;

	/**
	 * encrypted characters
	 */
	private JLabel[] indexCharEncrypted;
	
	/**
	 * encrypted characters position in alphabet
	 */
	private JLabel[] textCharEncrypted;

	/**
	 * description of the key
	 */
	private JLabel vigenereKeyDesc;
	
	/**
	 * key to encrypt with
	 */
<span class="nc" id="L66">	private String vigenereKey = i18n.tr(&quot;OKAY&quot;);</span>

	/**
	 * used for calculator
	 */
	private JLabel charFirst;
	private JLabel charSecond;
	private JLabel charFinished;
	
	/**
	 * explanation field
	 */
	private JLabel explanation;
	
	/**
	 * alphabet used for demonstration
	 */
	private AlphabetStripView alphabet;
	
	/**
	 * returns skip button
	 * @return skip button
	 */
	public JButton getSkipButton() {
<span class="nc" id="L90">		return this.skip;</span>
	}
	
	/**
	 * returns back button
	 * @return back button
	 */
	public JButton getReturnButton() {
<span class="nc" id="L98">		return this.btnReturn;</span>
	}
	
	/**
	 * sets the calculator to given parameters
	 * @param a first character
	 * @param b amount of rotation
	 */
	public void setCalculator(int a, int b) {
<span class="nc" id="L107">		int sum = ((a + b) % 26);</span>
		Dimension size;
<span class="nc" id="L109">		this.charFirst.setText(i18n.tr(&quot;Plaintext-Char&quot;) + &quot;: &quot; + a);</span>
<span class="nc" id="L110">		this.charSecond.setText(i18n.tr(&quot;Key-Char&quot;) + &quot;: &quot; + b);</span>
<span class="nc" id="L111">		this.charFinished.setText(i18n.tr(&quot;Result&quot;) + &quot;: &quot; + sum);</span>
<span class="nc" id="L112">		size = this.charFirst.getPreferredSize();</span>
<span class="nc" id="L113">		this.charFirst.setSize(size);</span>
<span class="nc" id="L114">		size = this.charSecond.getPreferredSize();</span>
<span class="nc" id="L115">		this.charSecond.setSize(size);</span>
<span class="nc" id="L116">		size = this.charFinished.getPreferredSize();</span>
<span class="nc" id="L117">		this.charFinished.setSize(size);</span>
<span class="nc" id="L118">		this.validate();</span>
<span class="nc" id="L119">	}</span>
	
	/**
	 * changes given textfield and also applies the numeration in the bottom label
	 * @param i which textfield to be changed
	 * @param character which character to be added
	 */
	public void setTextField(int i, String character) {
<span class="nc" id="L127">		this.textCharEncrypted[i].setText(character);</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">		if (character.isEmpty()) {</span>
<span class="nc" id="L129">			this.indexCharEncrypted[i].setText(&quot;&quot;);</span>
<span class="nc" id="L130">		} else { </span>
<span class="nc" id="L131">			this.indexCharEncrypted[i].setText(&quot;&quot; + VigenereModel.characterToInt(character));</span>
		}
<span class="nc" id="L133">		Dimension size = this.indexCharEncrypted[i].getPreferredSize();</span>
<span class="nc" id="L134">		this.indexCharEncrypted[i].setSize(size);</span>
<span class="nc" id="L135">		this.validate();</span>
<span class="nc" id="L136">	}</span>

	/**
	 * this highlights the selected character in the AlphaStripView and sets the character in
	 * the specified textfield
	 * @param num character to be highlighted in the AlphaStripView
	 * @param pos textfield to be changed
	 * @param character character to be set
	 */
	public void highlightAndSetText(int num, int pos, String character) {
<span class="nc" id="L146">		this.alphabet.unHighlightAll();</span>
<span class="nc" id="L147">		this.setTextField(pos, character);</span>
<span class="nc" id="L148">		this.alphabet.highlight(pos);</span>
<span class="nc" id="L149">	}</span>
	
	/**
	 * returns the alphabet
	 * @return alphabet
	 */
	public AlphabetStripView getAlphabet() {
<span class="nc" id="L156">		return alphabet;</span>
	}

	/**
	 * changes visibility of all label containing encrypted chars
	 * @param b visibility of all label containing encrypted chars
	 */
	public void setEncryptedCharsVisible(boolean b) {
<span class="nc bnc" id="L164" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharEncrypted.length; i++) {</span>
<span class="nc" id="L165">			this.indexCharEncrypted[i].setVisible(b);</span>
<span class="nc" id="L166">			this.textCharEncrypted[i].setVisible(b);</span>
		}
<span class="nc" id="L168">	}</span>
	
	/**
	 * sets the visibility of the calculator
	 * @param b visibility of the calculator
	 */
	public void setCalculatorVisible(boolean b) {
<span class="nc" id="L175">		this.charFirst.setVisible(b);</span>
<span class="nc" id="L176">		this.charSecond.setVisible(b);</span>
<span class="nc" id="L177">		this.charFinished.setVisible(b);</span>
<span class="nc" id="L178">	}</span>
	
	/**
	 * sets the visibility of the key
	 * @param b visibility of the key
	 */
	public void setKeyVisible(boolean b) {
<span class="nc" id="L185">		this.vigenereKeyDesc.setVisible(b);</span>
<span class="nc" id="L186">	}</span>
	
	/**
	 * changes the explanation text
	 * @param explanation text to change to
	 */
	public void setExplanation(String explanation) {
<span class="nc" id="L193">		this.explanation.setText(explanation);</span>
<span class="nc" id="L194">	}</span>
	
	/**
	 * creates and adds all GUI elements
	 */
	private void setupGUI() {
<span class="nc" id="L200">		this.setLayout(null);</span>
<span class="nc" id="L201">		this.add(this.explanation = new JLabel(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L202">				+ i18n.tr(&quot;Now we want to encrypt 'ANNE'. First of all we add &quot;</span>
				+ &quot;the position of every character, as you can see in the bottom, &quot;
				+ &quot;in the alphabet under each character.&quot;)
<span class="nc" id="L205">				+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;));</span>
<span class="nc" id="L206">		this.vigenereKeyDesc = new JLabel(i18n.tr(&quot;Vigenere Key&quot;) + &quot;: &quot; + this.vigenereKey);</span>
		
<span class="nc" id="L208">		this.add(this.skip = new JButton(&quot;Go to Decryption&quot;));</span>
<span class="nc" id="L209">		this.add(this.btnReturn = new JButton(&quot;Return to Introduction&quot;));</span>
<span class="nc" id="L210">		this.skip.setVisible(true);</span>
<span class="nc" id="L211">		this.alphabet = new AlphabetStripView();</span>

<span class="nc" id="L213">		this.textCharPlain = new JLabel[4];</span>
<span class="nc" id="L214">		this.textCharPlain[0] = new JLabel(&quot;A&quot;);</span>
<span class="nc" id="L215">		this.textCharPlain[1] = new JLabel(&quot;N&quot;);</span>
<span class="nc" id="L216">		this.textCharPlain[2] = new JLabel(&quot;N&quot;);</span>
<span class="nc" id="L217">		this.textCharPlain[3] = new JLabel(&quot;E&quot;);</span>
<span class="nc bnc" id="L218" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharPlain.length; i++) </span>
<span class="nc" id="L219">			this.add(this.textCharPlain[i]);</span>

<span class="nc" id="L221">		this.indexCharPlain = new JLabel[4];</span>
<span class="nc" id="L222">		this.indexCharPlain[0] = new JLabel(&quot; 1&quot;);</span>
<span class="nc" id="L223">		this.indexCharPlain[1] = new JLabel(&quot;14&quot;);</span>
<span class="nc" id="L224">		this.indexCharPlain[2] = new JLabel(&quot;14&quot;);</span>
<span class="nc" id="L225">		this.indexCharPlain[3] = new JLabel(&quot; 5&quot;);</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharPlain.length; i++)</span>
<span class="nc" id="L227">			this.add(this.indexCharPlain[i]);</span>

<span class="nc" id="L229">		this.textCharEncrypted = new JLabel[4];</span>
<span class="nc" id="L230">		this.textCharEncrypted[0] = new JLabel();</span>
<span class="nc" id="L231">		this.textCharEncrypted[1] = new JLabel();</span>
<span class="nc" id="L232">		this.textCharEncrypted[2] = new JLabel();</span>
<span class="nc" id="L233">		this.textCharEncrypted[3] = new JLabel();</span>
<span class="nc bnc" id="L234" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharEncrypted.length; i++)</span>
<span class="nc" id="L235">			this.add(this.textCharEncrypted[i]);</span>

<span class="nc" id="L237">		this.indexCharEncrypted = new JLabel[4];</span>
<span class="nc" id="L238">		this.indexCharEncrypted[0] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L239">		this.indexCharEncrypted[1] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L240">		this.indexCharEncrypted[2] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L241">		this.indexCharEncrypted[3] = new JLabel(&quot;  &quot;);</span>
<span class="nc bnc" id="L242" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharEncrypted.length; i++)</span>
<span class="nc" id="L243">			this.add(this.indexCharEncrypted[i]);</span>

<span class="nc" id="L245">		this.add(this.charFirst = new JLabel());</span>
<span class="nc" id="L246">		this.add(this.charSecond = new JLabel());</span>
<span class="nc" id="L247">		this.add(this.charFinished = new JLabel());</span>
<span class="nc" id="L248">		this.add(this.vigenereKeyDesc);</span>
<span class="nc" id="L249">		this.add(this.alphabet);</span>
<span class="nc" id="L250">	}</span>
	
	/**
	 * sets fonts to all elements
	 */
	private void setFonts() {
<span class="nc" id="L256">		this.vigenereKeyDesc.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L257">		this.charFirst.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L258">		this.charSecond.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L259">		this.charFinished.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L260">		this.explanation.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
		
		
<span class="nc bnc" id="L263" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharPlain.length; i++)</span>
<span class="nc" id="L264">			this.textCharPlain[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
	
<span class="nc bnc" id="L266" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharPlain.length; i++)</span>
<span class="nc" id="L267">			this.indexCharPlain[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
		
<span class="nc bnc" id="L269" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharEncrypted.length; i++)</span>
<span class="nc" id="L270">			this.textCharEncrypted[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
	
<span class="nc bnc" id="L272" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharEncrypted.length; i++)</span>
<span class="nc" id="L273">			this.indexCharEncrypted[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L274">	}</span>
	
	/**
	 * customizes the created GUI elements
	 */
	private void customizeGUI() {
<span class="nc" id="L280">		setCalculatorVisible(false);</span>
<span class="nc" id="L281">		setEncryptedCharsVisible(false);</span>
<span class="nc" id="L282">		setKeyVisible(false);</span>
		
<span class="nc" id="L284">		Dimension size = this.vigenereKeyDesc.getPreferredSize();</span>
<span class="nc" id="L285">		this.vigenereKeyDesc.setBounds(90, 250, size.width, size.height);</span>
		
<span class="nc" id="L287">		size = this.textCharPlain[0].getPreferredSize();</span>
<span class="nc" id="L288">		this.textCharPlain[0].setBounds(500, 150,</span>
<span class="nc" id="L289">	             size.width, size.height);</span>
		
<span class="nc" id="L291">		size = this.textCharPlain[1].getPreferredSize();</span>
<span class="nc" id="L292">		this.textCharPlain[1].setBounds(550, 150,</span>
<span class="nc" id="L293">	             size.width, size.height);</span>
		
<span class="nc" id="L295">		size = this.textCharPlain[2].getPreferredSize();</span>
<span class="nc" id="L296">		this.textCharPlain[2].setBounds(600, 150,</span>
<span class="nc" id="L297">	             size.width, size.height);</span>

<span class="nc" id="L299">		size = this.textCharPlain[3].getPreferredSize();</span>
<span class="nc" id="L300">		this.textCharPlain[3].setBounds(650, 150,</span>
<span class="nc" id="L301">	             size.width, size.height);</span>
		
<span class="nc" id="L303">		size = this.indexCharPlain[0].getPreferredSize();</span>
<span class="nc" id="L304">		this.indexCharPlain[0].setBounds(500, 210,</span>
<span class="nc" id="L305">	             size.width, size.height);</span>
		
<span class="nc" id="L307">		size = this.indexCharPlain[1].getPreferredSize();</span>
<span class="nc" id="L308">		this.indexCharPlain[1].setBounds(550, 210,</span>
<span class="nc" id="L309">	             size.width, size.height);</span>
		
<span class="nc" id="L311">		size = this.indexCharPlain[2].getPreferredSize();</span>
<span class="nc" id="L312">		this.indexCharPlain[2].setBounds(600, 210,</span>
<span class="nc" id="L313">	             size.width, size.height);</span>

<span class="nc" id="L315">		size = this.indexCharPlain[3].getPreferredSize();</span>
<span class="nc" id="L316">		this.indexCharPlain[3].setBounds(650, 210,</span>
<span class="nc" id="L317">	             size.width, size.height);</span>
		
<span class="nc" id="L319">		size.width = 24;</span>
<span class="nc" id="L320">		size.height = 44;</span>
<span class="nc" id="L321">		this.textCharEncrypted[0].setBounds(500, 300,</span>
<span class="nc" id="L322">	             size.width, size.height);</span>
		
<span class="nc" id="L324">		this.textCharEncrypted[1].setBounds(550, 300,</span>
<span class="nc" id="L325">	             size.width, size.height);</span>
		
<span class="nc" id="L327">		this.textCharEncrypted[2].setBounds(600, 300,</span>
<span class="nc" id="L328">	             size.width, size.height);</span>

<span class="nc" id="L330">		this.textCharEncrypted[3].setBounds(650, 300,</span>
<span class="nc" id="L331">	             size.width, size.height);</span>
		
<span class="nc" id="L333">		size = this.indexCharEncrypted[0].getPreferredSize();</span>
<span class="nc" id="L334">		this.indexCharEncrypted[0].setBounds(500, 360,</span>
<span class="nc" id="L335">	             size.width, size.height);</span>
		
<span class="nc" id="L337">		size = this.indexCharEncrypted[1].getPreferredSize();</span>
<span class="nc" id="L338">		this.indexCharEncrypted[1].setBounds(550, 360,</span>
<span class="nc" id="L339">	             size.width, size.height);</span>
		
<span class="nc" id="L341">		size = this.indexCharEncrypted[2].getPreferredSize();</span>
<span class="nc" id="L342">		this.indexCharEncrypted[2].setBounds(600, 360,</span>
<span class="nc" id="L343">	             size.width, size.height);</span>

<span class="nc" id="L345">		size = this.indexCharEncrypted[3].getPreferredSize();</span>
<span class="nc" id="L346">		this.indexCharEncrypted[3].setBounds(650, 360,</span>
<span class="nc" id="L347">	             size.width, size.height);</span>
		
<span class="nc" id="L349">		size = this.alphabet.getPreferredSize();</span>
<span class="nc" id="L350">		this.alphabet.setBounds(150, 570,</span>
<span class="nc" id="L351">	             size.width, size.height);</span>
		
<span class="nc" id="L353">		size = this.charFirst.getPreferredSize();</span>
<span class="nc" id="L354">		this.charFirst.setBounds(900, 210,</span>
<span class="nc" id="L355">	             size.width, size.height);</span>
		
<span class="nc" id="L357">		size = this.charSecond.getPreferredSize();</span>
<span class="nc" id="L358">		this.charSecond.setBounds(900, 260,</span>
<span class="nc" id="L359">	             size.width, size.height);</span>
		
<span class="nc" id="L361">		size = this.charFinished.getPreferredSize();</span>
<span class="nc" id="L362">		this.charFinished.setBounds(900, 310,</span>
<span class="nc" id="L363">	             size.width, size.height);</span>
		
<span class="nc" id="L365">		size = this.explanation.getPreferredSize();</span>
<span class="nc" id="L366">		this.explanation.setBounds(10, 50,</span>
<span class="nc" id="L367">	             size.width, size.height);</span>
		
<span class="nc" id="L369">		size = this.getBackButton().getPreferredSize();</span>
<span class="nc" id="L370">		this.getBackButton().setBounds(30, 600,</span>
<span class="nc" id="L371">	             size.width, size.height);</span>
		
		
<span class="nc" id="L374">		size = this.getNextButton().getPreferredSize();</span>
<span class="nc" id="L375">		this.getNextButton().setBounds(1100, 600,</span>
<span class="nc" id="L376">	             size.width, size.height);</span>
		
<span class="nc" id="L378">		size = this.getSkipButton().getPreferredSize();</span>
<span class="nc" id="L379">		this.getSkipButton().setBounds(1100, 5,</span>
<span class="nc" id="L380">	             size.width, size.height);</span>
		
<span class="nc" id="L382">		size = this.getReturnButton().getPreferredSize();</span>
<span class="nc" id="L383">		this.getReturnButton().setBounds(30, 5,</span>
<span class="nc" id="L384">	             size.width, size.height);</span>
<span class="nc" id="L385">	}</span>
	
	
	/**
	 * constructor of the view
	 */
<span class="nc" id="L391">	public SecondDemonstrationView() {</span>
<span class="nc" id="L392">		setupGUI();</span>
<span class="nc" id="L393">		setFonts();</span>
<span class="nc" id="L394">		customizeGUI();</span>
<span class="nc" id="L395">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span>test (Mar 21, 2014 6:54:09 PM)</div></body></html>