<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>FirstExperimentView.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (Mar 21, 2014 6:54:09 PM)</a> &gt; <a href="../../index.html" class="el_group">Cryptographics</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.kit.iks.Cryptographics.Vigenere.Experiment</a> &gt; <span class="el_source">FirstExperimentView.java</span></div><h1>FirstExperimentView.java</h1><pre class="source lang-java linenums">package edu.kit.iks.Cryptographics.Vigenere.Experiment;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JTextField;

import org.xnap.commons.i18n.I18n;

import edu.kit.iks.Cryptographics.Vigenere.VigenereModel;
import edu.kit.iks.CryptographicsLib.AlphabetStripView;
import edu.kit.iks.CryptographicsLib.Configuration;
import edu.kit.iks.CryptographicsLib.KeyboardView;
import edu.kit.iks.CryptographicsLib.VisualizationView;

/**
 * In this step, the user will decrypt a given message
 * @author Aydin Tekin
 */
public class FirstExperimentView extends VisualizationView{
	private static final long serialVersionUID = 6294968461280032987L;
	
	/**
	 * Localization instance
	 */
<span class="nc" id="L30">	private static I18n i18n = Configuration.getInstance().getI18n(FirstExperimentView.class);</span>
	
	/**
	 * plain characters
	 */
	private JLabel[] indexCharPlain;
	
	/**
	 * plain characters position in alphabet
	 */
	private JLabel[] textCharPlain;
	/**
	 * decrypted characters
	 */
	private JLabel[] indexCharDecrypted;
	
	/**
	 * decrypted characters position in alphabet
	 */
	private JTextField[] textCharDecrypted;
	
	/**
	 * description of the key
	 */
	private JLabel vigenereKeyDesc;
	
	/**
	 * key to encrypt with
	 */
<span class="nc" id="L59">	private String vigenereKey = &quot;ABCDE&quot;;</span>
	
	/**
	 * explanation field
	 */
	private JLabel explanation;
	
	/**
	 * alphabet used for demonstration
	 */
	private AlphabetStripView alphabet;
	
	/**
	 * error message
	 */
	private JLabel errorMessage;
	
	/**
	 * keyboard used for inputs
	 */
	private KeyboardView keyboard;
	
	/**
	 * Button to skip step
	 */
	private JButton skip;
	
	/**
	 * Button to go back
	 */
	private JButton btnReturn;
	
	/**
	 * returns skip button
	 * @return skip button
	 */
	public JButton getSkipButton() {
<span class="nc" id="L96">		return this.skip;</span>
	}
	
	/**
	 * returns back button
	 * @return back button
	 */
	public JButton getReturnButton() {
<span class="nc" id="L104">		return this.btnReturn;</span>
	}
	
	/**
	 * creates the keyboard
	 * @param input listener for the keyboard
	 * @param flag which type of keyboard we want
	 */
	public void createKeyboard(JTextField input, final int flag) {
<span class="nc" id="L113">		this.keyboard = new KeyboardView(input, flag);</span>
<span class="nc" id="L114">		this.add(this.keyboard);</span>
<span class="nc" id="L115">		Dimension size = this.keyboard.getPreferredSize();</span>
<span class="nc" id="L116">		this.keyboard.setBounds(400, 400, size.width, size.height);</span>
<span class="nc" id="L117">		this.validate();</span>
<span class="nc" id="L118">	}</span>
	
	/**
	 * hightlights the given textfield
	 * @param i
	 */
	public void highlightTextBorder(int i) {
<span class="nc" id="L125">		this.textCharDecrypted[i].setEnabled(true);</span>
<span class="nc" id="L126">		this.textCharDecrypted[i].setBorder(BorderFactory.createLineBorder(Color.blue, 5));</span>
<span class="nc" id="L127">	}</span>
	
	/**
	 * unhighlights the given textfield
	 * @param i
	 */
	public void unHighlightTextBorder(int i) {
<span class="nc" id="L134">		this.textCharDecrypted[i].setEnabled(false);</span>
<span class="nc" id="L135">		this.textCharDecrypted[i].setBorder(null);</span>
<span class="nc" id="L136">	}</span>
	
	/**
	 * @return the keyboard
	 */
	public KeyboardView getKeyboard() {
<span class="nc" id="L142">		return this.keyboard;</span>
	}
	
	/**
	 * @param keyboard
	 *            the keyboard to set
	 */
	public void setKeyboard(KeyboardView keyboard) {
<span class="nc" id="L150">		this.keyboard = keyboard;</span>
<span class="nc" id="L151">	}</span>
	
	/**
	 * returns the alphabet
	 * @return alphabet
	 */
	public AlphabetStripView getAlphabet() {
<span class="nc" id="L158">		return this.alphabet;</span>
	}
	
	/**
	 * returns the key
	 * @return key
	 */
	public String getKey() {
<span class="nc" id="L166">		return this.vigenereKey;</span>
	}
	
	/**
	 * changes given textfield and also applies the numeration in the bottom label
	 * @param i which textfield to be changed
	 * @param character which character to be added
	 */
	public void setTextField(int i, String character) {
<span class="nc" id="L175">		this.textCharDecrypted[i].setText(character);</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">		if (character.isEmpty()) {</span>
<span class="nc" id="L177">			this.indexCharDecrypted[i].setText(&quot;&quot;);</span>
<span class="nc" id="L178">		} else { </span>
<span class="nc" id="L179">			this.indexCharDecrypted[i].setText(&quot;&quot; + VigenereModel.characterToInt(character));</span>
		}
<span class="nc" id="L181">		Dimension size = this.indexCharDecrypted[i].getPreferredSize();</span>
<span class="nc" id="L182">		this.indexCharDecrypted[i].setSize(size);</span>
<span class="nc" id="L183">		this.validate();</span>
<span class="nc" id="L184">	}</span>
	
	/**
	 * returns the decrypted textfield of the current index
	 * @param i index of the textfield
	 * @return textfield according index
	 */
	public JTextField getTextFieldDecrypted(int i) {
<span class="nc" id="L192">		return this.textCharDecrypted[i];</span>
	}
	
	/**
	 * returns the plain textfield of the current index
	 * @param i index of the textfield
	 * @return textfield according index
	 */
	public JLabel getTextFieldPlain(int i) {
<span class="nc" id="L201">		return this.textCharPlain[i];</span>
	}
	
	/**
	 * return all textfields
	 * @return all textfields
	 */
	public JTextField[] getTextFields() {
<span class="nc" id="L209">		return this.textCharDecrypted;</span>
	}
	
	/**
	 * changes the explanation text
	 * @param explanation text to change to
	 */
	public void setExplanation(String explanation) {
<span class="nc" id="L217">		this.explanation.setText(explanation);</span>
<span class="nc" id="L218">		Dimension size = this.explanation.getPreferredSize();</span>
<span class="nc" id="L219">		this.explanation.setSize(size.width, size.height);</span>
<span class="nc" id="L220">		this.validate();</span>
<span class="nc" id="L221">	}</span>
	
	/**
	 * shows error message and highlights the texfield
	 * @param i highlights the texfield
	 */
	public void showError(int i) {
<span class="nc" id="L228">		this.textCharDecrypted[i].setBorder(BorderFactory.createLineBorder(Color.red, 5));</span>
<span class="nc" id="L229">		this.textCharDecrypted[i].setText(&quot;&quot;);</span>
<span class="nc" id="L230">		this.errorMessage.setVisible(true);</span>
<span class="nc" id="L231">	}</span>
	
	/**
	 * hide error message
	 */
	public void hideError() {
<span class="nc" id="L237">		this.errorMessage.setVisible(false);</span>
<span class="nc" id="L238">	}</span>
	
	
	/**
	 * creates and adds all GUI elements
	 */
	private void setupGUI() {
<span class="nc" id="L245">		this.setLayout(null);</span>
<span class="nc" id="L246">		this.add(this.explanation = new JLabel(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L247">				+ i18n.tr(&quot;Now it's your turn! Decrypt this string...&quot;)</span>
<span class="nc" id="L248">				+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;));</span>
<span class="nc" id="L249">		this.add(this.errorMessage = new JLabel(i18n.tr(&quot;Wrong Answer! Try again!&quot;)));</span>
		
<span class="nc" id="L251">		this.vigenereKeyDesc = new JLabel(i18n.tr(&quot;Vigenere Key&quot;) + &quot;: &quot; + this.vigenereKey);</span>
<span class="nc" id="L252">		this.alphabet = new AlphabetStripView();</span>
<span class="nc" id="L253">		this.add(this.skip = new JButton(&quot;Go to Explanation&quot;));</span>
<span class="nc" id="L254">		this.add(this.btnReturn = new JButton(&quot;Return to Decryption&quot;));</span>
<span class="nc" id="L255">		this.skip.setVisible(true);</span>
<span class="nc" id="L256">		this.textCharPlain = new JLabel[5];</span>
<span class="nc" id="L257">		this.textCharPlain[0] = new JLabel(&quot;T&quot;);</span>
<span class="nc" id="L258">		this.textCharPlain[1] = new JLabel(&quot;W&quot;);</span>
<span class="nc" id="L259">		this.textCharPlain[2] = new JLabel(&quot;S&quot;);</span>
<span class="nc" id="L260">		this.textCharPlain[3] = new JLabel(&quot;I&quot;);</span>
<span class="nc" id="L261">		this.textCharPlain[4] = new JLabel(&quot;W&quot;);</span>
<span class="nc bnc" id="L262" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharPlain.length; i++)</span>
<span class="nc" id="L263">			this.add(this.textCharPlain[i]);</span>

<span class="nc" id="L265">		this.indexCharPlain = new JLabel[5];</span>
<span class="nc" id="L266">		this.indexCharPlain[0] = new JLabel(&quot;20&quot;);</span>
<span class="nc" id="L267">		this.indexCharPlain[1] = new JLabel(&quot;23&quot;);</span>
<span class="nc" id="L268">		this.indexCharPlain[2] = new JLabel(&quot;19&quot;);</span>
<span class="nc" id="L269">		this.indexCharPlain[3] = new JLabel(&quot; 9&quot;);</span>
<span class="nc" id="L270">		this.indexCharPlain[4] = new JLabel(&quot;23&quot;);</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharPlain.length; i++)</span>
<span class="nc" id="L272">			this.add(this.indexCharPlain[i]);</span>

<span class="nc" id="L274">		this.textCharDecrypted = new JTextField[5];</span>
<span class="nc" id="L275">		this.textCharDecrypted[0] = new JTextField();</span>
<span class="nc" id="L276">		this.textCharDecrypted[1] = new JTextField();</span>
<span class="nc" id="L277">		this.textCharDecrypted[2] = new JTextField();</span>
<span class="nc" id="L278">		this.textCharDecrypted[3] = new JTextField();</span>
<span class="nc" id="L279">		this.textCharDecrypted[4] = new JTextField();</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharDecrypted.length; i++) {</span>
<span class="nc" id="L281">			this.add(this.textCharDecrypted[i]);</span>
<span class="nc" id="L282">			this.textCharDecrypted[i].setEnabled(false);</span>
		}
		
<span class="nc" id="L285">		this.indexCharDecrypted = new JLabel[5];</span>
<span class="nc" id="L286">		this.indexCharDecrypted[0] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L287">		this.indexCharDecrypted[1] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L288">		this.indexCharDecrypted[2] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L289">		this.indexCharDecrypted[3] = new JLabel(&quot;  &quot;);</span>
<span class="nc" id="L290">		this.indexCharDecrypted[4] = new JLabel(&quot;  &quot;);</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharDecrypted.length; i++)</span>
<span class="nc" id="L292">			this.add(this.indexCharDecrypted[i]);</span>
		
<span class="nc" id="L294">		this.add(this.vigenereKeyDesc);</span>
<span class="nc" id="L295">		this.add(this.alphabet);</span>
<span class="nc" id="L296">	}</span>
	
	/**
	 * sets fonts to all elements
	 */
	private void setFonts() {
<span class="nc" id="L302">		this.vigenereKeyDesc.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L303">		this.explanation.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L304">		this.errorMessage.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
		
<span class="nc bnc" id="L306" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharPlain.length; i++)</span>
<span class="nc" id="L307">			this.textCharPlain[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
	
<span class="nc bnc" id="L309" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharPlain.length; i++)</span>
<span class="nc" id="L310">			this.indexCharPlain[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
		
<span class="nc bnc" id="L312" title="All 2 branches missed.">		for (int i = 0; i &lt; this.textCharDecrypted.length; i++)</span>
<span class="nc" id="L313">			this.textCharDecrypted[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
	
<span class="nc bnc" id="L315" title="All 2 branches missed.">		for (int i = 0; i &lt; this.indexCharDecrypted.length; i++)</span>
<span class="nc" id="L316">			this.indexCharDecrypted[i].setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 28));</span>
<span class="nc" id="L317">	}</span>
	
	/**
	 * customizes the created GUI elements
	 */
	private void customizeGUI() {
<span class="nc" id="L323">		Dimension size = this.vigenereKeyDesc.getPreferredSize();</span>
<span class="nc" id="L324">		this.vigenereKeyDesc.setBounds(90, 300, size.width, size.height);</span>
		
<span class="nc" id="L326">		size = this.errorMessage.getPreferredSize();</span>
<span class="nc" id="L327">		this.errorMessage.setBounds(500, 400, size.width, size.height);</span>
		
<span class="nc" id="L329">		size = this.textCharPlain[0].getPreferredSize();</span>
<span class="nc" id="L330">		this.textCharPlain[0].setBounds(500, 150,</span>
<span class="nc" id="L331">	             size.width, size.height);</span>
		
<span class="nc" id="L333">		size = this.textCharPlain[1].getPreferredSize();</span>
<span class="nc" id="L334">		this.textCharPlain[1].setBounds(550, 150,</span>
<span class="nc" id="L335">	             size.width, size.height);</span>
		
<span class="nc" id="L337">		size = this.textCharPlain[2].getPreferredSize();</span>
<span class="nc" id="L338">		this.textCharPlain[2].setBounds(600, 150,</span>
<span class="nc" id="L339">	             size.width, size.height);</span>

<span class="nc" id="L341">		size = this.textCharPlain[3].getPreferredSize();</span>
<span class="nc" id="L342">		this.textCharPlain[3].setBounds(650, 150,</span>
<span class="nc" id="L343">	             size.width, size.height);</span>
		
<span class="nc" id="L345">		size = this.textCharPlain[4].getPreferredSize();</span>
<span class="nc" id="L346">		this.textCharPlain[4].setBounds(700, 150,</span>
<span class="nc" id="L347">	             size.width, size.height);</span>
		
<span class="nc" id="L349">		size = this.indexCharPlain[0].getPreferredSize();</span>
<span class="nc" id="L350">		this.indexCharPlain[0].setBounds(500, 210,</span>
<span class="nc" id="L351">	             size.width, size.height);</span>
		
<span class="nc" id="L353">		size = this.indexCharPlain[1].getPreferredSize();</span>
<span class="nc" id="L354">		this.indexCharPlain[1].setBounds(550, 210,</span>
<span class="nc" id="L355">	             size.width, size.height);</span>
		
<span class="nc" id="L357">		size = this.indexCharPlain[2].getPreferredSize();</span>
<span class="nc" id="L358">		this.indexCharPlain[2].setBounds(600, 210,</span>
<span class="nc" id="L359">	             size.width, size.height);</span>

<span class="nc" id="L361">		size = this.indexCharPlain[3].getPreferredSize();</span>
<span class="nc" id="L362">		this.indexCharPlain[3].setBounds(650, 210,</span>
<span class="nc" id="L363">	             size.width, size.height);</span>
		
<span class="nc" id="L365">		size = this.indexCharPlain[4].getPreferredSize();</span>
<span class="nc" id="L366">		this.indexCharPlain[4].setBounds(700, 210,</span>
<span class="nc" id="L367">	             size.width, size.height);</span>
		
<span class="nc" id="L369">		size.width = 50;</span>
<span class="nc" id="L370">		size.height = 44;</span>
<span class="nc" id="L371">		this.textCharDecrypted[0].setBounds(500, 300,</span>
<span class="nc" id="L372">	             size.width, size.height);</span>
		
<span class="nc" id="L374">		this.textCharDecrypted[1].setBounds(550, 300,</span>
<span class="nc" id="L375">	             size.width, size.height);</span>
		
<span class="nc" id="L377">		this.textCharDecrypted[2].setBounds(600, 300,</span>
<span class="nc" id="L378">	             size.width, size.height);</span>

<span class="nc" id="L380">		this.textCharDecrypted[3].setBounds(650, 300,</span>
<span class="nc" id="L381">	             size.width, size.height);</span>
		
<span class="nc" id="L383">		this.textCharDecrypted[4].setBounds(700, 300,</span>
<span class="nc" id="L384">	             size.width, size.height);</span>
		
<span class="nc" id="L386">		size = this.indexCharDecrypted[0].getPreferredSize();</span>
<span class="nc" id="L387">		this.indexCharDecrypted[0].setBounds(500, 360,</span>
<span class="nc" id="L388">	             size.width, size.height);</span>
		
<span class="nc" id="L390">		size = this.indexCharDecrypted[1].getPreferredSize();</span>
<span class="nc" id="L391">		this.indexCharDecrypted[1].setBounds(550, 360,</span>
<span class="nc" id="L392">	             size.width, size.height);</span>
		
<span class="nc" id="L394">		size = this.indexCharDecrypted[2].getPreferredSize();</span>
<span class="nc" id="L395">		this.indexCharDecrypted[2].setBounds(600, 360,</span>
<span class="nc" id="L396">	             size.width, size.height);</span>

<span class="nc" id="L398">		size = this.indexCharDecrypted[3].getPreferredSize();</span>
<span class="nc" id="L399">		this.indexCharDecrypted[3].setBounds(650, 360,</span>
<span class="nc" id="L400">	             size.width, size.height);</span>
		
<span class="nc" id="L402">		size = this.indexCharDecrypted[4].getPreferredSize();</span>
<span class="nc" id="L403">		this.indexCharDecrypted[4].setBounds(700, 360,</span>
<span class="nc" id="L404">	             size.width, size.height);</span>
		
<span class="nc" id="L406">		size = this.alphabet.getPreferredSize();</span>
<span class="nc" id="L407">		this.alphabet.setBounds(150, 570,</span>
<span class="nc" id="L408">	             size.width, size.height);</span>
		
<span class="nc" id="L410">		size = this.explanation.getPreferredSize();</span>
<span class="nc" id="L411">		this.explanation.setBounds(10, 50,</span>
<span class="nc" id="L412">	             size.width, size.height);</span>
		
<span class="nc" id="L414">		size = this.getBackButton().getPreferredSize();</span>
<span class="nc" id="L415">		this.getBackButton().setBounds(30, 600,</span>
<span class="nc" id="L416">	             size.width, size.height);</span>
		
		
<span class="nc" id="L419">		size = this.getNextButton().getPreferredSize();</span>
<span class="nc" id="L420">		this.getNextButton().setBounds(1100, 600,</span>
<span class="nc" id="L421">	             size.width, size.height);</span>
		
<span class="nc" id="L423">		size = this.getSkipButton().getPreferredSize();</span>
<span class="nc" id="L424">		this.getSkipButton().setBounds(1100, 5,</span>
<span class="nc" id="L425">	             size.width, size.height);</span>
		
<span class="nc" id="L427">		size = this.getReturnButton().getPreferredSize();</span>
<span class="nc" id="L428">		this.getReturnButton().setBounds(30, 5,</span>
<span class="nc" id="L429">	             size.width, size.height);</span>
		
<span class="nc" id="L431">		getAlphabet().highlight(0);</span>
<span class="nc" id="L432">		getAlphabet().highlight(19);</span>
<span class="nc" id="L433">		highlightTextBorder(0);</span>
<span class="nc" id="L434">		hideError();</span>
<span class="nc" id="L435">	}</span>
	
	/**
	 * Constructor
	 */
<span class="nc" id="L440">	public FirstExperimentView() {</span>
<span class="nc" id="L441">		setupGUI();</span>
<span class="nc" id="L442">		setFonts();</span>
<span class="nc" id="L443">		customizeGUI();</span>
<span class="nc" id="L444">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span>test (Mar 21, 2014 6:54:09 PM)</div></body></html>