<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>FirstExplanationView.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (Mar 21, 2014 6:54:09 PM)</a> &gt; <a href="../../index.html" class="el_group">Cryptographics</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.kit.iks.Cryptographics.Vigenere.Explanation</a> &gt; <span class="el_source">FirstExplanationView.java</span></div><h1>FirstExplanationView.java</h1><pre class="source lang-java linenums">package edu.kit.iks.Cryptographics.Vigenere.Explanation;

import java.awt.Dimension;
import java.awt.Font;

import javax.swing.JButton;
import javax.swing.JLabel;

import org.xnap.commons.i18n.I18n;

import edu.kit.iks.Cryptographics.Vigenere.VigenereModel;
import edu.kit.iks.CryptographicsLib.CharacterFrequencyDiagramView;
import edu.kit.iks.CryptographicsLib.Configuration;
import edu.kit.iks.CryptographicsLib.VisualizationView;

/*
 * This class represents the view of the first explanatation step. In the first step the disadvantages
 * and possible weak points of the vigenere-cipher.
 */
public class FirstExplanationView extends VisualizationView{
	private static final long serialVersionUID = 6294968461280032987L;
	
	/**
	 * Localization instance
	 */
<span class="nc" id="L26">	private static I18n i18n = Configuration.getInstance().getI18n(FirstExplanationView.class);</span>
	
	static final String vigenereText = &quot;HEREUPON LEGRAND AROSE, WITH A GRAVE AND STATELY AIR, AND BROUGHT ME THE BEETLEFROM A GLASS CASE &quot;
			+ &quot;IN WHICH IT WAS ENCLOSED. IT WAS A BEAUTIFUL SCARABAEUS, AND, AT&quot;
			+ &quot;THAT TIME, UNKNOWN TO NATURALISTS-OF COURSE A GREAT PRIZE IN A SCIENTIFIC POINT&quot;
			+ &quot;OF VIEW. THERE WERE TWO ROUND BLACK SPOTS NEAR ONE EXTREMITY OF THE BACK, AND A&quot;
			+ &quot;LONG ONE NEAR THE OTHER. THE SCALES WERE EXCEEDINGLY HARD AND GLOSSY, WITH ALL THE&quot;
			+ &quot;APPEARANCE OF BURNISHED GOLD. THE WEIGHT OF THE INSECT WAS VERY REMARKABLE, AND,&quot;
			+ &quot;TAKING ALL THINGS INTO CONSIDERATION, I COULD HARDLY BLAME JUPITER FOR HIS OPINION&quot;
			+ &quot;RESPECTING IT.&quot;;
	static final String vigenereEncrypted = &quot;VOFOIZCX ZOUBOXR KFYGO, KSHR O QFKJO OXR CHKHOZI OSF, KBN PBCEURH WS DVO POSDZO&quot;
			+ &quot;TBCW O QZKGC QKGO WX KRWMV SH GOC SXQVCCSN. WD KKG K POOEHSTEZ CQKFKPKSEG, KBN, OD&quot;
			+ &quot;HROD HSAO, IXYXCGB DC XODIBOVWCHC-CP QYIBGO O QFOOD DBWJS SB K GMWOBDWPWM DYWXH&quot;
			+ &quot;YT FWOK. DVOFO KOFO HGC BCEBN PVOMY CDYHC BOOB CXS OLDFOASHI CP HRS LOMY, KBN O&quot;
			+ &quot;VCXU YBO BOOB HRS YHRSB. HRS CQKZOG GSBS OLMSORSBQZI VKFN OXR QZYGCM, GWDV KZV HRS&quot;
			+ &quot;KDZSKFKBMS YT LIBBSGRSN UYZN. HRS GSSURH YT DVO WXGOQD KKG FSBM BSWOBYKPVS, KBN,&quot;
			+ &quot;HKYSBQ OVZ DVSBQG SBDC MCXGSROFKHSCX, W MCEZN VKFNZI PVOWS TIZWDSB TYF RWC CZWXWYB&quot;
			+ &quot;BSCDOQDWXU SH.&quot;;
	static final String averageText = &quot;HEREUPON LEGRAND AROSE, WITH A GRAVE AND STATELY AIR, AND BROUGHT ME THE BEETLEFROM A GLASS CASE &quot;
			+ &quot;IN WHICH IT WAS ENCLOSED. IT WAS A BEAUTIFUL SCARABAEUS, AND, AT&quot;
			+ &quot;THAT TIME, UNKNOWN TO NATURALISTS-OF COURSE A GREAT PRIZE IN A SCIENTIFIC POINT&quot;
			+ &quot;OF VIEW. THERE WERE TWO ROUND BLACK SPOTS NEAR ONE EXTREMITY OF THE BACK, AND A&quot;
			+ &quot;LONG ONE NEAR THE OTHER. THE SCALES WERE EXCEEDINGLY HARD AND GLOSSY, WITH ALL THE&quot;
			+ &quot;APPEARANCE OF BURNISHED GOLD. THE WEIGHT OF THE INSECT WAS VERY REMARKABLE, AND,&quot;
			+ &quot;TAKING ALL THINGS INTO CONSIDERATION, I COULD HARDLY BLAME JUPITER FOR HIS OPINION&quot;
			+ &quot;RESPECTING IT.&quot;;
	static final String encryptedAverageText = &quot;VOFOIZCX ZOUBOXR KFYGO, KSHR O QFKJO OXR CHKHOZI OSF, KBN PBCEURH WS DVO POSDZO&quot;
			+ &quot;TBCW O QZKGC QKGO WX KRWMV SH GOC SXQVCCSN. WD KKG K POOEHSTEZ CQKFKPKSEG, KBN, OD&quot;
			+ &quot;HROD HSAO, IXYXCGB DC XODIBOVWCHC-CP QYIBGO O QFOOD DBWJS SB K GMWOBDWPWM DYWXH&quot;
			+ &quot;YT FWOK. DVOFO KOFO HGC BCEBN PVOMY CDYHC BOOB CXS OLDFOASHI CP HRS LOMY, KBN O&quot;
			+ &quot;VCXU YBO BOOB HRS YHRSB. HRS CQKZOG GSBS OLMSORSBQZI VKFN OXR QZYGCM, GWDV KZV HRS&quot;
			+ &quot;KDZSKFKBMS YT LIBBSGRSN UYZN. HRS GSSURH YT DVO WXGOQD KKG FSBM BSWOBYKPVS, KBN,&quot;
			+ &quot;HKYSBQ OVZ DVSBQG SBDC MCXGSROFKHSCX, W MCEZN VKFNZI PVOWS TIZWDSB TYF RWC CZWXWYB&quot;
<span class="nc" id="L59">			+ &quot;BSCDOQDWXU SH.&quot;;</span>
	
	/**
	 * histogramm of encrypted text
	 */
	private CharacterFrequencyDiagramView vigenereHistogramm;
	
	/**
	 * histogramm of average text
	 */
	private CharacterFrequencyDiagramView averageHistogramm;
	
	/**
	 * explanation
	 */
	private JLabel explanation;
	
	/**
	 * key length
	 */
	private JLabel keyLength;
	
	/**
	 * explanation
	 */
	private JLabel secondExplanation;
	
	/**
	 * explanation
	 */
	private JLabel thirdExplanation;
	
	/**
	 * button to find key
	 */
	private JButton findKeyLength;
	
	/**
	 * Button to go back
	 */
	private JButton btnReturn;
	
	/**
	 * Button to skip step
	 */
	private JButton skip;
	
	/**
	 * returns back button
	 * @return back button
	 */
	public JButton getReturnButton() {
<span class="nc" id="L111">		return this.btnReturn;</span>
	}
	
	/**
	 * returns skip button
	 * @return skip button
	 */
	public JButton getSkipButton() {
<span class="nc" id="L119">		return this.skip;</span>
	}
	
	/**
	 * sets the keylength label
	 * @param s text to change label to
	 */
	public void setKeyLength(String s) {
<span class="nc" id="L127">		this.keyLength.setText(s);</span>
<span class="nc" id="L128">	}</span>
	
	/**
	 * returns the button to get keylength
	 * @return button to get keylength
	 */
	public JButton getKeyLengthButton() {
<span class="nc" id="L135">		return this.findKeyLength;</span>
	}
	
	/**
	 * changes the explanation text
	 * @param explanation text to change to
	 */
	public void setExplanation(String s){
<span class="nc" id="L143">		this.explanation.setText(s);</span>
<span class="nc" id="L144">		Dimension size = this.explanation.getPreferredSize();</span>
<span class="nc" id="L145">		this.explanation.setBounds(10, 50,</span>
<span class="nc" id="L146">	             size.width, size.height);</span>
<span class="nc" id="L147">		this.validate();</span>
<span class="nc" id="L148">	}</span>
	
	/**
	 * changes the visibility according to first step
	 * @param b visibility according to first step
	 */
	public void visibleFirstState(boolean b) {
<span class="nc" id="L155">		this.keyLength.setVisible(b);</span>
<span class="nc" id="L156">		this.findKeyLength.setVisible(b);</span>
<span class="nc" id="L157">	}</span>
	
	/**
	 * changes the visibility according to second step
	 * @param b visibility according to second step
	 */
	public void visibleSecondState(boolean b) {
<span class="nc" id="L164">		this.vigenereHistogramm.setVisible(b);</span>
<span class="nc" id="L165">		this.secondExplanation.setVisible(b);</span>
<span class="nc" id="L166">		this.averageHistogramm.setVisible(b);</span>
<span class="nc" id="L167">		this.thirdExplanation.setVisible(b);</span>
<span class="nc" id="L168">	}</span>
	
	/**
	 * creates and adds all GUI elements
	 */
	private void setupGUI() {
<span class="nc" id="L174">		this.setLayout(null);</span>
<span class="nc" id="L175">		this.add(this.skip = new JButton(&quot;Go to Cracking&quot;));</span>
<span class="nc" id="L176">		this.add(this.btnReturn = new JButton(&quot;Return to Experiment&quot;));</span>
<span class="nc" id="L177">		this.add(this.explanation = new JLabel(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L178">			+ i18n.tr(&quot;Vigenère fixed a few weaknesses of Caesar, but still has flaws. If &quot;</span>
			+ &quot;the key is shorter then the text to encrypt, &quot;
       		+ &quot;Vigenère simply concatinates it with itself until the key is long enough. &quot;
       		+ &quot;This again makes it weak against key-length-guessing. &quot;
       		+ &quot;As soon as we guess the key-length, we can use a histogramm &quot;
       		+ &quot;(explained in caesar) to make a static analysis. So lets crack this &quot;
       		+ &quot;this chiffre by guessing the key-length (we will use the kasiski test for it)&quot;)
<span class="nc" id="L185">       		+ &quot;:&lt;br&gt;&lt;br&gt;&quot;</span>
<span class="nc" id="L186">       		+ vigenereEncrypted</span>
<span class="nc" id="L187">       		+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;));</span>
<span class="nc" id="L188">		this.add(this.secondExplanation = new JLabel(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L189">				+ i18n.tr(&quot;This is the average distribution of the characters in english texts:&quot;)</span>
<span class="nc" id="L190">				+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;));</span>
<span class="nc" id="L191">		this.add(this.findKeyLength = new JButton(&quot;Find Key-Length&quot;));</span>
<span class="nc" id="L192">		this.add(this.keyLength = new JLabel(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L193">				+ i18n.tr(&quot;Length of key: ?&quot;)</span>
<span class="nc" id="L194">				+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;));</span>
<span class="nc" id="L195">		this.add(this.thirdExplanation = new JLabel(&quot;&lt;html&gt;&lt;div width=\&quot;1200\&quot;&gt;&quot;</span>
<span class="nc" id="L196">				+ i18n.tr(&quot;When we look closer at the histogramm we see some differences in the &quot;</span>
				+ &quot;distribution of the characters; 'S' is has the most common occurance,&quot;
				+ &quot;in an average normal english text 'E' is the most common one. So maybe &quot;
				+ &quot;our 'S' couldve been an 'E' before the encryption. We do 19(position of 'S') &quot;
				+ &quot;- 5 (position of 'E') and we get 14, which means&quot;
				+ &quot;the first character of the key is 'N'.&quot;)
<span class="nc" id="L202">				+ &quot;&lt;/div&gt;&lt;/html&gt;&quot;));</span>
<span class="nc" id="L203">		this.vigenereHistogramm = new CharacterFrequencyDiagramView(VigenereModel.getCharPositionated(0, 2, encryptedAverageText), 600,</span>
<span class="nc" id="L204">				100);</span>
<span class="nc" id="L205">		this.add(this.vigenereHistogramm);</span>
<span class="nc" id="L206">		this.vigenereHistogramm.setVisible(false);</span>
		
<span class="nc" id="L208">		this.averageHistogramm = new CharacterFrequencyDiagramView(averageText, 600,</span>
<span class="nc" id="L209">				100);</span>
<span class="nc" id="L210">		this.add(this.averageHistogramm);</span>
<span class="nc" id="L211">		this.averageHistogramm.setVisible(false);</span>
<span class="nc" id="L212">	}</span>
	
	/**
	 * sets fonts to all elements
	 */
	private void setFonts() {
<span class="nc" id="L218">		this.explanation.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L219">		this.secondExplanation.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 18));		</span>
<span class="nc" id="L220">		this.findKeyLength.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L221">		this.keyLength.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L222">		this.thirdExplanation.setFont(new Font(&quot;Comic Sans MS&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L223">	}</span>
	
	/**
	 * customizes the created GUI elements
	 */
	private void customizeGUI() {
<span class="nc" id="L229">		Dimension size = this.explanation.getPreferredSize();</span>
<span class="nc" id="L230">		this.explanation.setBounds(10, 50,</span>
<span class="nc" id="L231">	             size.width, size.height);</span>
<span class="nc" id="L232">		size = this.findKeyLength.getPreferredSize();</span>
<span class="nc" id="L233">		this.findKeyLength.setBounds(600, 390,</span>
<span class="nc" id="L234">	             size.width, size.height);</span>
		
<span class="nc" id="L236">		size = this.keyLength.getPreferredSize();</span>
<span class="nc" id="L237">		this.keyLength.setBounds(10, 390,</span>
<span class="nc" id="L238">	             size.width, size.height);</span>
		
<span class="nc" id="L240">		size = this.secondExplanation.getPreferredSize();</span>
<span class="nc" id="L241">		this.secondExplanation.setBounds(10, 290,</span>
<span class="nc" id="L242">	             size.width, size.height);</span>
<span class="nc" id="L243">		this.secondExplanation.setVisible(false);</span>
		
<span class="nc" id="L245">		size = this.thirdExplanation.getPreferredSize();</span>
<span class="nc" id="L246">		this.thirdExplanation.setBounds(10, 470,</span>
<span class="nc" id="L247">	             size.width, size.height);</span>
<span class="nc" id="L248">		this.thirdExplanation.setVisible(false);</span>
		
<span class="nc" id="L250">		size = this.getBackButton().getPreferredSize();</span>
<span class="nc" id="L251">		this.getBackButton().setBounds(30, 600,</span>
<span class="nc" id="L252">	             size.width, size.height);</span>
		
<span class="nc" id="L254">		size = this.getNextButton().getPreferredSize();</span>
<span class="nc" id="L255">		this.getNextButton().setBounds(1100, 600,</span>
<span class="nc" id="L256">	             size.width, size.height);</span>
<span class="nc" id="L257">		this.getNextButton().setVisible(false);</span>
		
<span class="nc" id="L259">		size = this.getSkipButton().getPreferredSize();</span>
<span class="nc" id="L260">		this.getSkipButton().setBounds(1100, 5,</span>
<span class="nc" id="L261">	             size.width, size.height);</span>
		
<span class="nc" id="L263">		size = this.getReturnButton().getPreferredSize();</span>
<span class="nc" id="L264">		this.getReturnButton().setBounds(30, 5,</span>
<span class="nc" id="L265">	             size.width, size.height);</span>
		
<span class="nc" id="L267">		this.vigenereHistogramm.setBounds(10, 190,</span>
<span class="nc" id="L268">	             600, 100);</span>
<span class="nc" id="L269">		this.averageHistogramm.setBounds(10, 330,</span>
<span class="nc" id="L270">	             600, 100);</span>
<span class="nc" id="L271">	}</span>
	
	/**
	 * Constructor
	 */
<span class="nc" id="L276">	public FirstExplanationView() {</span>
<span class="nc" id="L277">		setupGUI();</span>
<span class="nc" id="L278">		setFonts();</span>
<span class="nc" id="L279">		customizeGUI();</span>
<span class="nc" id="L280">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span>test (Mar 21, 2014 6:54:09 PM)</div></body></html>